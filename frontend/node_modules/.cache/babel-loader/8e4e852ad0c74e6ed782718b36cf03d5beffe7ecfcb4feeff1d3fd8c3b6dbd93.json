{"ast":null,"code":"export function getGamesStats(gameData, playerId, playerTeam, playerPosition) {\n  const gameCount = gameData.length;\n  //console.log(\"gameCount: \", gameCount);\n  if (gameCount === 0) {\n    return {}; // Return an empty object if no games are found\n  } else {\n    let gameStats = {\n      playerId: playerId,\n      playerName: \"\",\n      gameTotal: gameCount,\n      winTotal: 0,\n      blueSideTotal: 0,\n      blueSideWinTotal: 0,\n      kda: [0, 0, 0],\n      // [kills, deaths, assists]\n      totalGameDuration: 0,\n      // in seconds\n      firstBloodTotal: 0,\n      // total first bloods taken by the player\n      perfectKDATotal: 0,\n      winRate: 0,\n      // %\n      blueSidePlayRate: 0,\n      redSidePlayRate: 0,\n      blueSideWinRate: 0,\n      redSideWinRate: 0,\n      averageGameDuration: \"\",\n      // in seconds\n      averageKills: 0,\n      averageDeaths: 0,\n      averageAssists: 0,\n      perfectKDARate: 0,\n      damageShare: 0,\n      firstBloodRate: 0,\n      firstTo6Rate: 0\n    };\n    // find the player's team\n    const playerTeamNumber = gameData[0].teamBlue === playerTeam ? 0 : 1;\n    let totalDamageShare = 0; // sum of all damage shares\n    for (let i = 0; i < gameCount; i++) {\n      const game = gameData[i];\n      if (game.winner === (playerTeamNumber === 0)) {\n        gameStats.winTotal += 1;\n        if (game.teamBlue === playerTeam) {\n          gameStats.blueSideTotal += 1;\n          if (game.winner === true) {\n            gameStats.blueSideWinTotal += 1;\n          }\n        }\n      }\n      gameStats.totalGameDuration += game.gameDuration;\n      gameStats.kda[0] += game.kda[playerTeamNumber][playerPosition][0]; // kills\n      gameStats.kda[1] += game.kda[playerTeamNumber][playerPosition][1]; // deaths\n      gameStats.kda[2] += game.kda[playerTeamNumber][playerPosition][2]; // assists\n      if (game.kda[playerTeamNumber][playerPosition][1] === 0) {\n        gameStats.perfectKDATotal += 1;\n      }\n      let teamDamage = 0;\n      for (let j = 0; j < 5; j++) {\n        teamDamage += game.damageDealt[playerTeamNumber][j];\n      }\n      totalDamageShare += game.damageDealt[playerTeamNumber][playerPosition] / teamDamage; // damage share\n      teamDamage = game.damageDealt[playerTeamNumber].reduce((sum, dmg) => sum + dmg, 0);\n    }\n    gameStats.winRate = Number((gameStats.winTotal / gameCount * 100).toFixed(2));\n    gameStats.blueSidePlayRate = Number((gameStats.blueSideTotal / gameCount * 100).toFixed(2));\n    gameStats.redSidePlayRate = Number((100 - gameStats.blueSidePlayRate).toFixed(2));\n    gameStats.blueSideWinRate = gameStats.blueSideTotal === 0 ? 0 : Number((gameStats.blueSideWinTotal / gameStats.blueSideTotal * 100).toFixed(2));\n    gameStats.damageShare = Number((totalDamageShare / gameCount * 100).toFixed(2)); // average damage share per game\n\n    // calculate average game duration and format it as \"MM:SS\"\n    const averageGameDurationSeconds = gameStats.totalGameDuration / gameCount % 60;\n    const averageGameDurationMinutes = Math.round(gameStats.totalGameDuration / gameCount / 60);\n    gameStats.averageGameDuration = averageGameDurationMinutes.toString() + \":\" + (averageGameDurationSeconds < 10 ? \"0\" : \"\") + averageGameDurationSeconds.toString();\n    console.log(\"averageGameDuration: \", gameStats.averageGameDuration);\n    return gameStats;\n  }\n}","map":{"version":3,"names":["getGamesStats","gameData","playerId","playerTeam","playerPosition","gameCount","length","gameStats","playerName","gameTotal","winTotal","blueSideTotal","blueSideWinTotal","kda","totalGameDuration","firstBloodTotal","perfectKDATotal","winRate","blueSidePlayRate","redSidePlayRate","blueSideWinRate","redSideWinRate","averageGameDuration","averageKills","averageDeaths","averageAssists","perfectKDARate","damageShare","firstBloodRate","firstTo6Rate","playerTeamNumber","teamBlue","totalDamageShare","i","game","winner","gameDuration","teamDamage","j","damageDealt","reduce","sum","dmg","Number","toFixed","averageGameDurationSeconds","averageGameDurationMinutes","Math","round","toString","console","log"],"sources":["C:/Users/loppo/Projets/morestats/frontend/src/utils/calculators/getGamesStats.ts"],"sourcesContent":["import { Game } from \"../../types/Game\";\r\nimport { PlayerGameStats } from \"../../types/PlayerGameStats\";\r\n\r\nexport function getGamesStats(\r\n  gameData: Game[],\r\n  playerId: number,\r\n  playerTeam: string,\r\n  playerPosition: number\r\n): PlayerGameStats {\r\n  const gameCount = gameData.length;\r\n  //console.log(\"gameCount: \", gameCount);\r\n  if (gameCount === 0) {\r\n    return {} as PlayerGameStats; // Return an empty object if no games are found\r\n  } else {\r\n    let gameStats: PlayerGameStats = {\r\n      playerId: playerId,\r\n      playerName: \"\",\r\n\r\n      gameTotal: gameCount,\r\n      winTotal: 0,\r\n      blueSideTotal: 0,\r\n      blueSideWinTotal: 0,\r\n      kda: [0, 0, 0], // [kills, deaths, assists]\r\n      totalGameDuration: 0, // in seconds\r\n      firstBloodTotal: 0, // total first bloods taken by the player\r\n      perfectKDATotal: 0,\r\n\r\n      winRate: 0, // %\r\n      blueSidePlayRate: 0, \r\n      redSidePlayRate: 0, \r\n      blueSideWinRate: 0, \r\n      redSideWinRate: 0, \r\n      averageGameDuration: \"\", // in seconds\r\n      averageKills: 0, \r\n      averageDeaths: 0, \r\n      averageAssists: 0,\r\n      perfectKDARate: 0,\r\n      damageShare: 0,\r\n      firstBloodRate: 0, \r\n      firstTo6Rate: 0, \r\n    };\r\n    // find the player's team\r\n    const playerTeamNumber = gameData[0].teamBlue === playerTeam ? 0 : 1;\r\n    let totalDamageShare = 0; // sum of all damage shares\r\n    for (let i = 0; i < gameCount; i++) {\r\n      const game = gameData[i];\r\n      if (game.winner === (playerTeamNumber === 0)) {\r\n        gameStats.winTotal += 1;\r\n        if (game.teamBlue === playerTeam) {\r\n          gameStats.blueSideTotal += 1;\r\n          if (game.winner === true) {\r\n            gameStats.blueSideWinTotal += 1;\r\n          }\r\n        }\r\n      }\r\n      gameStats.totalGameDuration += game.gameDuration;\r\n      gameStats.kda[0] += game.kda[playerTeamNumber][playerPosition][0]; // kills\r\n      gameStats.kda[1] += game.kda[playerTeamNumber][playerPosition][1]; // deaths\r\n      gameStats.kda[2] += game.kda[playerTeamNumber][playerPosition][2]; // assists\r\n      if (game.kda[playerTeamNumber][playerPosition][1] === 0) {\r\n        gameStats.perfectKDATotal += 1;\r\n        }\r\n      let teamDamage = 0;\r\n      for (let j = 0; j < 5; j++) {\r\n        teamDamage += game.damageDealt[playerTeamNumber][j];\r\n      }\r\n      totalDamageShare +=\r\n        game.damageDealt[playerTeamNumber][playerPosition] / teamDamage; // damage share\r\n      teamDamage = game.damageDealt[playerTeamNumber].reduce(\r\n        (sum, dmg) => sum + dmg,\r\n        0\r\n      );\r\n    }\r\n\r\n    gameStats.winRate = Number(\r\n      ((gameStats.winTotal / gameCount) * 100).toFixed(2)\r\n    );\r\n    gameStats.blueSidePlayRate = Number(\r\n      ((gameStats.blueSideTotal / gameCount) * 100).toFixed(2)\r\n    );\r\n    gameStats.redSidePlayRate = Number(\r\n      (100 - gameStats.blueSidePlayRate).toFixed(2)\r\n    );\r\n    gameStats.blueSideWinRate =\r\n      gameStats.blueSideTotal === 0\r\n        ? 0\r\n        : Number(\r\n            (\r\n              (gameStats.blueSideWinTotal / gameStats.blueSideTotal) *\r\n              100\r\n            ).toFixed(2)\r\n          );\r\n    gameStats.damageShare = Number(\r\n      ((totalDamageShare / gameCount) * 100).toFixed(2)\r\n    ); // average damage share per game\r\n\r\n    // calculate average game duration and format it as \"MM:SS\"\r\n    const averageGameDurationSeconds =\r\n      (gameStats.totalGameDuration / gameCount) % 60;\r\n    const averageGameDurationMinutes = Math.round(\r\n      gameStats.totalGameDuration / gameCount / 60\r\n    );\r\n    gameStats.averageGameDuration =\r\n      averageGameDurationMinutes.toString() +\r\n      \":\" +\r\n      (averageGameDurationSeconds < 10 ? \"0\" : \"\") +\r\n      averageGameDurationSeconds.toString();\r\n    console.log(\"averageGameDuration: \", gameStats.averageGameDuration);\r\n    return gameStats;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}