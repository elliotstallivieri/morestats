{"ast":null,"code":"export function getGamesStats(gameData, playerId, playerTeam, playerPosition) {\n  const gameCount = gameData.length;\n  //console.log(\"gameCount: \", gameCount);\n  if (gameCount === 0) {\n    return {}; // Return an empty object if no games are found\n  } else {\n    var gameStats = {\n      playerId: playerId,\n      playerName: \"\",\n      gameTotal: gameCount,\n      winTotal: 0,\n      blueSideTotal: 0,\n      blueSideWinTotal: 0,\n      kda: [0, 0, 0],\n      // [kills, deaths, assists]\n      totalGameDuration: 0,\n      // in seconds\n      firstBloodTotal: 0,\n      // total first bloods taken by the player\n\n      winRate: 0,\n      // percentage\n      blueSidePlayRate: 0,\n      // percentage\n      redSidePlayRate: 0,\n      // percentage\n      blueSideWinRate: 0,\n      // percentage\n      redSideWinRate: 0,\n      // percentage\n      averageGameDuration: \"\",\n      // in seconds\n      averageKills: 0,\n      // average kills per game\n      averageDeaths: 0,\n      // average deaths per game\n      damageShare: 0,\n      // average damage share per game\n      firstBloodRate: 0,\n      // percentage of games where the player got first blood\n      firstTo6Rate: 0 // percentage of games where the player was the first to reach level 6\n    };\n    // find the player's team\n    const playerTeamNumber = gameData[0].teamBlue === playerTeam ? 0 : 1;\n    for (let i = 0; i < gameCount; i++) {\n      const game = gameData[i];\n      if (game.winner === (playerTeamNumber === 0)) {\n        gameStats.winTotal += 1;\n      }\n      if (game.teamBlue === playerTeam) {\n        gameStats.blueSideTotal += 1;\n        if (game.winner === true) {\n          gameStats.blueSideWinTotal += 1;\n        }\n      }\n      gameStats.totalGameDuration += game.gameDuration;\n      gameStats.kda[0] += game.kda[playerTeamNumber][playerPosition][0]; // kills\n      gameStats.kda[1] += game.kda[playerTeamNumber][playerPosition][1]; // deaths\n      gameStats.kda[2] += game.kda[playerTeamNumber][playerPosition][2]; // assists\n    }\n    gameStats.winRate = gameStats.winTotal / gameCount * 100;\n    gameStats.blueSidePlayRate = gameStats.blueSideTotal / gameCount * 100;\n    gameStats.redSidePlayRate = 100 - gameStats.blueSidePlayRate;\n    gameStats.blueSideWinRate = gameStats.blueSideTotal === 0 ? 0 : gameStats.blueSideWinTotal / gameStats.blueSideTotal * 100;\n\n    // calculate average game duration and format it as \"MM:SS\"\n    const averageGameDurationSeconds = gameStats.totalGameDuration / gameCount % 60;\n    const averageGameDurationMinutes = Math.round(gameStats.totalGameDuration / gameCount / 60);\n    gameStats.averageGameDuration = averageGameDurationMinutes.toString() + \":\" + (averageGameDurationSeconds < 10 && \"0\") + averageGameDurationSeconds.toString();\n    console.log(\"averageGameDuration: \", gameStats.averageGameDuration);\n    return gameStats;\n  }\n}","map":{"version":3,"names":["getGamesStats","gameData","playerId","playerTeam","playerPosition","gameCount","length","gameStats","playerName","gameTotal","winTotal","blueSideTotal","blueSideWinTotal","kda","totalGameDuration","firstBloodTotal","winRate","blueSidePlayRate","redSidePlayRate","blueSideWinRate","redSideWinRate","averageGameDuration","averageKills","averageDeaths","damageShare","firstBloodRate","firstTo6Rate","playerTeamNumber","teamBlue","i","game","winner","gameDuration","averageGameDurationSeconds","averageGameDurationMinutes","Math","round","toString","console","log"],"sources":["C:/Users/loppo/Projets/morestats/frontend/src/utils/calculators/getGamesStats.ts"],"sourcesContent":["import { Game } from \"../../types/Game\";\r\nimport { PlayerGameStats } from \"../../types/PlayerGameStats\";\r\n\r\nexport function getGamesStats(\r\n  gameData: Game[],\r\n  playerId: number,\r\n  playerTeam: string,\r\n  playerPosition: number\r\n): PlayerGameStats {\r\n  const gameCount = gameData.length;\r\n  //console.log(\"gameCount: \", gameCount);\r\n  if (gameCount === 0) {\r\n    return {} as PlayerGameStats; // Return an empty object if no games are found\r\n  } else {\r\n    var gameStats: PlayerGameStats = {\r\n      playerId: playerId,\r\n      playerName: \"\",\r\n\r\n      gameTotal: gameCount,\r\n      winTotal: 0,\r\n      blueSideTotal: 0,\r\n      blueSideWinTotal: 0,\r\n      kda: [0, 0, 0], // [kills, deaths, assists]\r\n      totalGameDuration: 0, // in seconds\r\n        firstBloodTotal: 0, // total first bloods taken by the player\r\n\r\n      winRate: 0, // percentage\r\n      blueSidePlayRate: 0, // percentage\r\n      redSidePlayRate: 0, // percentage\r\n      blueSideWinRate: 0, // percentage\r\n      redSideWinRate: 0, // percentage\r\n      averageGameDuration: \"\", // in seconds\r\n      averageKills: 0, // average kills per game\r\n      averageDeaths: 0, // average deaths per game\r\n        damageShare: 0, // average damage share per game\r\n        firstBloodRate: 0, // percentage of games where the player got first blood\r\n        firstTo6Rate: 0, // percentage of games where the player was the first to reach level 6\r\n    };\r\n    // find the player's team\r\n    const playerTeamNumber = gameData[0].teamBlue === playerTeam ? 0 : 1;\r\n\r\n    for (let i = 0; i < gameCount; i++) {\r\n      const game = gameData[i];\r\n      if (game.winner === (playerTeamNumber === 0)) {\r\n        gameStats.winTotal += 1;\r\n      }\r\n      if (game.teamBlue === playerTeam) {\r\n        gameStats.blueSideTotal += 1;\r\n        if (game.winner === true) {\r\n          gameStats.blueSideWinTotal += 1;\r\n        }\r\n      }\r\n      gameStats.totalGameDuration += game.gameDuration;\r\n      gameStats.kda[0] += game.kda[playerTeamNumber][playerPosition][0]; // kills\r\n      gameStats.kda[1] += game.kda[playerTeamNumber][playerPosition][1]; // deaths\r\n      gameStats.kda[2] += game.kda[playerTeamNumber][playerPosition][2]; // assists\r\n    }\r\n    gameStats.winRate = (gameStats.winTotal / gameCount) * 100;\r\n    gameStats.blueSidePlayRate = (gameStats.blueSideTotal / gameCount) * 100;\r\n    gameStats.redSidePlayRate = 100 - gameStats.blueSidePlayRate;\r\n    gameStats.blueSideWinRate =\r\n      gameStats.blueSideTotal === 0\r\n        ? 0\r\n        : (gameStats.blueSideWinTotal / gameStats.blueSideTotal) * 100;\r\n\r\n    // calculate average game duration and format it as \"MM:SS\"\r\n    const averageGameDurationSeconds =\r\n      (gameStats.totalGameDuration / gameCount) % 60;\r\n    const averageGameDurationMinutes = Math.round(\r\n      gameStats.totalGameDuration / gameCount / 60\r\n    );\r\n    gameStats.averageGameDuration =\r\n      averageGameDurationMinutes.toString() +\r\n      \":\" +\r\n      (averageGameDurationSeconds < 10 && \"0\") +\r\n      averageGameDurationSeconds.toString();\r\n    console.log(\"averageGameDuration: \", gameStats.averageGameDuration);\r\n    return gameStats;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}